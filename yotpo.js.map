{"version":3,"file":"yotpo.js","names":["getAccessToken","appKey","appSecret","page","pageSize","Promise","resolve","reject","axios","post","client_id","client_secret","grant_type","timeout","headers","accept","then","response","data","access_token","error","console","log","allReviews","accessToken","get","params","utoken","count","reviews","getCachedData","assetsUrl","allProductBottomlines","bottomlines","allSiteBottomlines","bottomline"],"sources":["src/yotpo.js"],"sourcesContent":["import axios from \"axios\";\n\nexport const getAccessToken = ({ appKey, appSecret, page, pageSize }) => {\n  return new Promise((resolve, reject) => {\n    axios.post(`https://api.yotpo.com/oauth/token`, {\n      client_id: appKey,\n      client_secret: appSecret,\n      grant_type: \"client_credentials\",\n    }, {\n      timeout: 3000,\n      headers: {\n        accept: 'application/json'\n      }\n    }).then((response) => {\n      resolve(response.data.access_token);\n    }).catch((error) => {\n      console.log('Get all reviews error', error);\n      reject(error);\n    });\n  });\n  /*\nconst options = {\n    method: \"POST\",\n    url: `https://api.yotpo.com/oauth/token`,\n    json: {\n      client_id: appKey,\n      client_secret: appSecret,\n      grant_type: \"client_credentials\",\n    },\n  };\n\n  return new Promise((resolve, reject) => {\n    request(options, function (error, response, body) {\n      if (error) reject(error);\n\n      resolve(body.access_token);\n    });\n  });\n  */\n};\n\nexport const allReviews = ({ appKey, accessToken, page, pageSize }) => {\n  return new Promise((resolve, reject) => {\n    console.log(`getting page ${page}`);\n    axios.get(`https://api.yotpo.com/v1/apps/${appKey}/reviews`, {\n      params: {\n        utoken: accessToken,\n        page: page,\n        count: pageSize,\n      },\n      timeout: 10000,\n      headers: {\n        accept: 'application/json'\n      }\n    }).then((response) => {\n      resolve(response.data.reviews);\n    }).catch((error) => {\n      console.log('Get all reviews error', error);\n      reject(error);\n    });\n  });\n};\n\nexport const getCachedData = (assetsUrl) => {\n  return new Promise((resolve, reject) => {\n    axios.get(`${assetsUrl}/assets/Yotpo/reviews.json`, {\n      timeout: 3000,\n      headers: {\n        accept: 'application/json'\n      }\n    }).then((response) => {\n      resolve(response.data);\n    }).catch((error) => {\n      console.log('Get cached data error', error);\n      reject(error);\n    });\n  });\n}\nexport const allProductBottomlines = ({ appKey, page, pageSize }) => {\n  return new Promise((resolve, reject) => {\n    axios.get(`https://api.yotpo.com/v1/apps/${appKey}/bottom_lines`, {\n      params: {\n        page: page,\n        count: pageSize,\n      },\n      timeout: 3000,\n      headers: {\n        accept: 'application/json'\n      }\n    }).then((response) => { \n      resolve(response.data.response.bottomlines);\n    }).catch((error) => {\n      console.log('All product bottom line error', error);\n      reject(error);\n    });\n  });\n};\n\nexport const allSiteBottomlines = ({ appKey, page, pageSize }) => {\n  return new Promise((resolve, reject) => {\n    axios.get(`https://api.yotpo.com/products/${appKey}/yotpo_site_reviews/bottomline`, {\n      params: {\n        page: page,\n        count: pageSize,\n      },\n      timeout: 3000,\n      headers: {\n        accept: 'application/json'\n      }\n    }).then((response) => {\n      resolve([response.data.response.bottomline]);\n    }).catch((error) => {\n      console.log('All site bottom line error', error);\n      reject(error);\n    });\n  });\n};\n"],"mappings":"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"}